# 業務利用ガイド

## ネットワーク公開の注意点

### ⚠️ セキュリティリスク

1. **同一ネットワーク内の全員がアクセス可能**
   - 同じWi-Fiに接続している全員がアクセスできます
   - 病院のネットワークでは、不特定多数がアクセス可能な可能性があります

2. **開発サーバーは本番環境向けではない**
   - エラーメッセージが詳細に表示される
   - パフォーマンスが最適化されていない
   - セキュリティ機能が不十分

3. **推奨されない使用方法**
   - 業務での本番利用には適していません
   - 一時的なテスト用途のみに使用してください

## 業務利用の推奨方法

### 方法1: 静的サイトとしてデプロイ（推奨）

本アプリは**クライアント完結型**（データは端末内のみ）のため、静的サイトとして配信可能です。

#### メリット
- ✅ サーバー不要（コスト削減）
- ✅ 高速（CDN配信）
- ✅ セキュア（サーバーサイドの脆弱性なし）
- ✅ オフライン対応可能（PWA）
- ✅ スケーラブル（アクセス数に依存しない）

#### デプロイ手順

1. **静的エクスポート設定**
   - `next.config.mjs`を編集：
   ```javascript
   const nextConfig = {
     output: 'export',
   };
   ```

2. **ビルド**
   ```powershell
   npm run build
   ```

3. **デプロイ先の選択**

   **A. 無料ホスティングサービス**
   - **Vercel**（推奨）: Next.jsの開発元が提供
     - URL例: `https://your-app.vercel.app`
     - 無料プランで十分
   - **Netlify**: 静的サイト向け
   - **GitHub Pages**: GitHubアカウントがあれば無料

   **B. 病院の内部サーバー**
   - 病院のWebサーバーに`out`フォルダを配置
   - 内部ネットワークからのみアクセス可能
   - 最もセキュア

   **C. クラウドストレージ（OneDrive/Google Drive）**
   - 共有フォルダとして配置
   - 簡単だが、URLが長くなる

### 方法2: 病院の内部サーバーに配置

#### メリット
- ✅ 外部にデータが流出しない
- ✅ 病院のネットワークセキュリティポリシーに準拠
- ✅ 完全な内部管理

#### 手順

1. **静的ファイルを生成**
   ```powershell
   npm run build
   ```

2. **`out`フォルダを病院のWebサーバーに配置**
   - IIS、Apache、Nginxなど
   - 内部ネットワークからのみアクセス可能に設定

3. **URLをスタッフに共有**
   - 例: `http://internal-server/tavi-ct-input/`

## セキュリティ考慮事項

### ✅ 本アプリのセキュリティ特性

1. **データは端末内のみ**
   - すべてのデータは`localStorage`に保存
   - サーバーに送信されない
   - ネットワーク経由でデータが漏洩するリスクが低い

2. **静的サイト**
   - サーバーサイドの処理がない
   - SQLインジェクションなどのリスクがない

3. **HTTPS推奨**
   - 本番環境ではHTTPSを使用
   - 多くのホスティングサービスで自動対応

### ⚠️ 注意点

1. **localStorageのデータ**
   - ブラウザのキャッシュをクリアすると消える
   - 端末固有のデータ（他の端末では見えない）

2. **URLの共有**
   - 共有されたURLを知っている全員がアクセス可能
   - 必要に応じて認証を追加（別途実装が必要）

## 推奨される運用方法

### ステップ1: 開発・テスト
- ローカル環境で開発
- 必要に応じてネットワーク公開モードでテスト

### ステップ2: 本番ビルド
```powershell
npm run build
```

### ステップ3: デプロイ
- 病院の内部サーバーに配置（推奨）
- または、Vercel/Netlifyなどのホスティングサービスを使用

### ステップ4: URL共有
- スタッフにURLを共有
- ブックマークやホーム画面に追加してもらう

## よくある質問

### Q: データはどこに保存されますか？
A: 端末のブラウザの`localStorage`にのみ保存されます。サーバーには送信されません。

### Q: 複数の端末で同じデータを見られますか？
A: いいえ。各端末で独立してデータが保存されます。

### Q: オフラインで使用できますか？
A: はい。PWAとしてインストールすれば、オフラインでも入力できます（メール送信はオンライン時のみ）。

### Q: セキュリティは大丈夫ですか？
A: データは端末内のみで、サーバーに送信されないため、ネットワーク経由での漏洩リスクは低いです。ただし、端末自体のセキュリティには注意が必要です。

